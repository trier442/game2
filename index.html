<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•´ì†”ì¤‘&ë¼ë¼ì¤‘ êµ­ì–´ ê¸°ë§ëŒ€ë¹„ í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <script>
        function setScreenHeight() {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        setScreenHeight();
        window.addEventListener('resize', setScreenHeight);
    </script>
    <style>
        body {
            font-family: 'Jua', sans-serif;
            touch-action: manipulation;
        }
        #game-container {
            height: calc(var(--vh, 1vh) * 100);
        }
        @media (min-width: 640px) {
            #game-container {
                height: 90vh;
                max-height: 800px;
            }
        }
        .road-line {
            position: absolute; width: 6px; height: 100%; top: 0;
            background-image: linear-gradient(to bottom, white 50%, transparent 50%);
            background-size: 100% 70px; animation: road-lines 2.5s linear infinite;
        }
        @keyframes road-lines { from { background-position: 0 0; } to { background-position: 0 70px; } }
        @keyframes fall { from { transform: translateY(-100px); } to { transform: translateY(100vh); } }
        .falling { animation: fall 10s linear; }
        #car { transition: left 0.2s ease-out; }
        .modal { transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; }
        .modal.hidden { opacity: 0; transform: scale(0.9); pointer-events: none; }
        #player-name-input { border: 2px solid #6366f1; transition: border-color 0.3s; }
        #player-name-input:focus { outline: none; border-color: #a5b4fc; }
        #leaderboard ol { list-style-type: decimal; padding-left: 2rem; }
        #leaderboard li { display: flex; justify-content: space-between; }
        .quiz-select-btn {
            transition: all 0.2s ease-in-out;
        }
        .quiz-select-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gray-800 flex items-center justify-center min-h-screen overflow-hidden">

    <div id="game-container" class="w-full max-w-md bg-gray-600 rounded-lg shadow-2xl flex flex-col relative overflow-hidden border-4 border-gray-700">
        
        <div class="absolute top-1.5 left-1/2 -translate-x-1/2 text-xs text-gray-400 z-30">ë°°ê³§êµ­í’€êµ­ì–´í•™ì›</div>

        <div class="bg-gray-900 text-white p-4 shadow-lg z-20 flex flex-col space-y-2">
            <div class="flex justify-between items-center text-base md:text-lg font-bold pt-4">
                <div id="player-info" class="hidden">Player: <span id="player-name-display"></span></div>
                <div id="score-display" class="hidden">ì ìˆ˜: <span id="score">0</span></div>
            </div>
            <div id="question" class="text-center text-lg md:text-xl min-h-[5rem] flex items-center justify-center px-2 border-t border-gray-700 pt-2"></div>
        </div>

        <div id="game-screen" class="flex-1 relative">
            <div class="road-line" style="left: 33.33%; transform: translateX(-50%);"></div>
            <div class="road-line" style="left: 66.66%; transform: translateX(-50%);"></div>
            <div id="car" class="w-12 h-16 absolute bottom-8 left-1/2 -translate-x-1/2 text-5xl z-10">ğŸš“</div>
            <div id="answers-container" class="absolute w-full h-24 flex justify-around" style="top: 0;"></div>
        </div>

        <div class="bg-gray-900 p-2 flex justify-center space-x-2 sm:hidden z-20">
            <button id="move-left-btn" class="w-1/3 bg-blue-500 text-white font-bold py-4 px-4 rounded-lg text-2xl active:bg-blue-700">â—€</button>
            <button id="move-forward-btn" class="w-1/3 bg-green-500 text-white font-bold py-4 px-4 rounded-lg text-2xl active:bg-green-700">â–²</button>
            <button id="move-right-btn" class="w-1/3 bg-blue-500 text-white font-bold py-4 px-4 rounded-lg text-2xl active:bg-blue-700">â–¶</button>
        </div>

        <div id="start-screen" class="modal absolute inset-0 bg-black bg-opacity-70 flex flex-col items-center justify-center z-30 px-4 overflow-y-auto py-4">
            <h1 id="start-title" class="text-3xl md:text-4xl font-bold text-white mb-4 text-center">í•´ì†”ì¤‘&ë¼ë¼ì¤‘ êµ­ì–´ ê¸°ë§ëŒ€ë¹„ í€´ì¦ˆ</h1>
            
            <div id="name-input-container" class="w-full max-w-sm mb-4 flex-shrink-0">
                <label for="player-name-input" class="block text-white text-center mb-2">í”Œë ˆì´ì–´ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</label>
                <input type="text" id="player-name-input" class="w-full px-4 py-2 rounded-lg bg-gray-200 text-gray-800 text-center font-bold" placeholder="ì´ë¦„" maxlength="10">
            </div>

            <div id="quiz-selection-container" class="w-full max-w-sm flex-shrink-0">
                 <p id="start-desc" class="text-yellow-300 text-lg mb-4 text-center">í”Œë ˆì´í•  ì±•í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”!</p>
                 <div id="quiz-options" class="grid grid-cols-2 gap-3">
                 </div>
            </div>
            
            <div id="leaderboard" class="mt-6 w-full max-w-sm text-white bg-gray-800 bg-opacity-50 p-4 rounded-lg hidden flex-shrink-0">
                <h3 id="leaderboard-title" class="text-2xl text-yellow-300 font-bold text-center mb-2">ğŸ† ëª…ì˜ˆì˜ ì „ë‹¹ ğŸ†</h3>
                <ol id="leaderboard-list" class="text-lg"></ol>
            </div>

            <div id="restart-container" class="mt-6 hidden flex-shrink-0">
                <button id="restart-button" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-8 rounded-full text-2xl shadow-lg transform hover:scale-105 transition-transform">
                    ì±•í„° ì„ íƒìœ¼ë¡œ
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy, limit, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";

        const elements = {
            car: document.getElementById('car'),
            gameScreen: document.getElementById('game-screen'),
            question: document.getElementById('question'),
            score: document.getElementById('score'),
            answersContainer: document.getElementById('answers-container'),
            startScreen: document.getElementById('start-screen'),
            startTitle: document.getElementById('start-title'),
            startDesc: document.getElementById('start-desc'),
            moveLeftBtn: document.getElementById('move-left-btn'),
            moveRightBtn: document.getElementById('move-right-btn'),
            moveForwardBtn: document.getElementById('move-forward-btn'),
            playerNameInput: document.getElementById('player-name-input'),
            playerNameDisplay: document.getElementById('player-name-display'),
            playerInfo: document.getElementById('player-info'),
            scoreDisplay: document.getElementById('score-display'),
            nameInputContainer: document.getElementById('name-input-container'),
            quizSelectionContainer: document.getElementById('quiz-selection-container'),
            quizOptions: document.getElementById('quiz-options'),
            leaderboard: document.getElementById('leaderboard'),
            leaderboardTitle: document.getElementById('leaderboard-title'),
            leaderboardList: document.getElementById('leaderboard-list'),
            restartContainer: document.getElementById('restart-container'),
            restartButton: document.getElementById('restart-button')
        };
        
        let db;
        try {
            const firebaseConfig = {
                apiKey: "AIzaSyDcagfE320vd1DuT6uZ8mHhVy2yB74C1q0",
                authDomain: "grammar-294b6.firebaseapp.com",
                projectId: "grammar-294b6",
                storageBucket: "grammar-294b6.appspot.com",
                messagingSenderId: "865611264169",
                appId: "1:865611264169:web:84b9e6d784c3b41bd139b8"
            };
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            const auth = getAuth(app);
            signInAnonymously(auth).catch(error => console.error("Anonymous sign-in failed:", error));
        } catch (e) { console.error("Firebase initialization failed:", e); }

        let audioCtx;
        const setupAudio = () => { if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); };
        const playSound = (type) => {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            if (type === 'correct') {
                osc.type = 'sine'; osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(800, audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            } else {
                osc.type = 'square'; osc.frequency.setValueAtTime(200, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.2);
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
            }
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.2);
        };

        const quizzes = {
            'ì—„ë§ˆ ê±±ì •': [
                { question: "ì‹œì—ì„œ ë§í•˜ëŠ” ì´ë¥¼ ë¬´ì—‡ì´ë¼ê³  í•˜ëŠ”ê°€?", answers: ["ì‹œì¸", "ë…ì", "í™”ì"], correct: 2 },
                { question: "ì´ ì‹œì˜ í™”ìëŠ” ì–´ë–¤ ì‹œì ˆì„ íšŒìƒí•˜ê³  ìˆëŠ”ê°€?", answers: ["ë…¸ë…„", "ì²­ë…„", "ìœ ë…„"], correct: 2 },
                { question: "1ì—°ì—ì„œ í™”ìê°€ ëŠë¼ëŠ” ì£¼ëœ ì •ì„œ ë‘ ê°€ì§€ëŠ”?", answers: ["ê¸°ì¨, ì„¤ë ˜", "ë¶„ë…¸, ì›ë§", "ë‘ë ¤ì›€, ì™¸ë¡œì›€"], correct: 2 },
                { question: "í™”ìì˜ ì™¸ë¡œìš´ ì²˜ì§€ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì‹œì–´ê°€ ì•„ë‹Œ ê²ƒì€?", answers: ["ì°¬ë°¥", "ì—´ë¬´", "ë¹ˆë°©"], correct: 1 },
                { question: "ì‹œì—ì„œ 'í•´ëŠ” ì‹œë“  ì§€ ì˜¤ë˜'ë¼ëŠ” í‘œí˜„ì— ì‚¬ìš©ëœ ì£¼ëœ í‘œí˜„ë²•ì€?", answers: ["ì§ìœ ë²•", "í™œìœ ë²•", "ì€ìœ ë²•"], correct: 1 },
                { question: "ì—„ë§ˆì˜ ì§€ì¹œ ëª¨ìŠµì„ ë¹„ìœ ì ìœ¼ë¡œ í‘œí˜„í•œ ì‹œì–´ëŠ”?", answers: ["ì°¬ë°¥", "ë°°ì¶§ì", "ìœ—ëª©"], correct: 1 },
                { question: "í™”ìì˜ ìœ ë…„ ì‹œì ˆì´ ì¶¥ê³  í˜ë“¤ì—ˆìŒì„ ë¹„ìœ ì ìœ¼ë¡œ ë‚˜íƒ€ë‚´ëŠ” ì‹œì–´ëŠ”?", answers: ["ê¸ˆê°„ ì°½í‹ˆ", "ë¹—ì†Œë¦¬", "ìœ—ëª©"], correct: 2 },
                { question: "'ì•ˆ ì˜¤ì‹œë„¤'ë¼ëŠ” í‘œí˜„ì„ ë°˜ë³µí•˜ì—¬ ê°•ì¡°í•˜ëŠ” ê²ƒì€?", answers: ["ì—„ë§ˆì— ëŒ€í•œ ì›ë§", "ê¸°ë‹¤ë¦¼ì˜ ê°„ì ˆí•¨", "ì‹œê°„ì˜ íë¦„"], correct: 1 },
                { question: "í™”ìì˜ ê²½ì œì  ì–´ë ¤ì›€ì„ ì•”ì‹œí•˜ëŠ” ì‹œì–´ëŠ”?", answers: ["ë¹—ì†Œë¦¬", "ê¸ˆê°„ ì°½í‹ˆ", "ì°¬ë°¥"], correct: 1 },
                { question: "2ì—°ì—ì„œ í™”ìê°€ 'ì§€ê¸ˆë„ ë‚´ ëˆˆì‹œìš¸ì„ ëœ¨ê²ê²Œ' í•˜ëŠ” ì´ìœ ëŠ”?", answers: ["ì—„ë§ˆê°€ ë³´ê³  ì‹¶ì–´ì„œ", "ìœ ë…„ ì‹œì ˆì˜ ìŠ¬í””ì´ ë– ì˜¬ë¼ì„œ", "ëˆˆì— ë³‘ì´ ë‚˜ì„œ"], correct: 1 },
                { question: "ì´ ì‹œëŠ” ì‹œê°„ì ìœ¼ë¡œ ì–´ë–»ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ê°€?", answers: ["í˜„ì¬->ê³¼ê±°", "ê³¼ê±°->í˜„ì¬", "ê³¼ê±°->í˜„ì¬->ê³¼ê±°"], correct: 1 },
                { question: "ì‹œì˜ ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í•˜ë©° í™”ìì˜ ì™¸ë¡œì›€ì„ ì‹¬í™”ì‹œí‚¤ëŠ” ì²­ê°ì  ì‹¬ìƒì€?", answers: ["ë°œì†Œë¦¬", "ë¹—ì†Œë¦¬", "í›Œì©ì´ëŠ” ì†Œë¦¬"], correct: 1 },
                { question: "'ì°¬ë°¥ì²˜ëŸ¼ ë°©ì— ë‹´ê²¨'ëŠ” í™”ìì˜ ì–´ë–¤ ì²˜ì§€ë¥¼ ë¹„ìœ í•˜ëŠ”ê°€?", answers: ["ë”°ëŒë¦¼ ë‹¹í•˜ëŠ” ì²˜ì§€", "í˜¼ì ë‚¨ê²¨ì§„ ì™¸ë¡œìš´ ì²˜ì§€", "ë°°ê³ í”ˆ ì²˜ì§€"], correct: 1 },
                { question: "í™”ìëŠ” 'ì•„ë¬´ë¦¬ ì²œì²œíˆ ìˆ™ì œë¥¼ í•´ë„' ì—„ë§ˆê°€ ì˜¤ì§€ ì•ŠëŠ”ë‹¤ê³  ë§í•œë‹¤. ì´ í–‰ë™ì˜ ì˜ë„ëŠ”?", answers: ["ê³µë¶€ë¥¼ ì—´ì‹¬íˆ í•˜ê¸° ìœ„í•´", "ì—„ë§ˆë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì„ ë²„í‹°ê¸° ìœ„í•´", "ìˆ™ì œê°€ ë„ˆë¬´ ë§ì•„ì„œ"], correct: 1 },
                { question: "ì´ ì‹œì—ì„œ 'ì—„ë§ˆ'ëŠ” ì–´ë–¤ ì´ë¯¸ì§€ë¡œ ê·¸ë ¤ì§€ëŠ”ê°€?", answers: ["ê°€ì¡±ì„ ìœ„í•´ ê³ ìƒí•˜ëŠ” ëª¨ìŠµ", "ìì‹ì„ ì—„í•˜ê²Œ ëŒ€í•˜ëŠ” ëª¨ìŠµ", "ì—¬ìœ ë¡­ê³  í–‰ë³µí•œ ëª¨ìŠµ"], correct: 0 },
                { question: "2ì—°ì—ì„œ 'ê·¸ ì‹œì ˆ'ì´ ê°€ë¦¬í‚¤ëŠ” ê²ƒì€?", answers: ["ì‹œì¥ì´ íŒŒí•œ ë’¤", "ì„±ì¸ì´ ëœ ì§€ê¸ˆ", "ì–´ë¦° ì‹œì ˆ"], correct: 2 },
                { question: "ì´ ì‹œëŠ” ëª…ì‚¬í˜•ìœ¼ë¡œ ì‹œë¥¼ ì¢…ê²°í•˜ì—¬ ë¬´ì—‡ì„ ì£¼ê³  ìˆëŠ”ê°€?", answers: ["í¬ë§", "ì—¬ìš´", "ê¸´ì¥ê°"], correct: 1 },
                { question: "í™”ìê°€ 1ì—°ì˜ 'ë‚˜'ì™€ 2ì—°ì˜ 'ë‚˜'ëŠ” ë™ì¼ ì¸ë¬¼ì´ë‹¤. (O/X)", answers: ["O", "X"], correct: 0 },
                { question: "ì´ ì‹œì˜ í™”ìëŠ” ì—„ë§ˆë¥¼ ì›ë§í•˜ê³  ìˆë‹¤. (O/X)", answers: ["O", "X"], correct: 1 },
                { question: "ì´ ì‹œì—ì„œ í™”ìê°€ ìì‹ ì˜ ê°ì •ì„ ì§ì ‘ì ìœ¼ë¡œ ë“œëŸ¬ë‚¸ í‘œí˜„ì€?", answers: ["ì°¬ë°¥ì²˜ëŸ¼", "í›Œì©ê±°ë¦¬ë˜", "ë°°ì¶§ì ê°™ì€"], correct: 1 }
            ],
            'ë™ë°±ê½ƒ': [
                { question: "ì´ ì†Œì„¤ì˜ ì„œìˆ ìëŠ” ëˆ„êµ¬ì¸ê°€?", answers: ["ì ìˆœì´", "ë‚˜", "ì‘ê°€"], correct: 1 },
                { question: "ì´ ì†Œì„¤ì˜ ì„œìˆ  ë°©ì‹(ì‹œì )ì€ ë¬´ì—‡ì¸ê°€?", answers: ["1ì¸ì¹­ ì£¼ì¸ê³µ ì‹œì ", "1ì¸ì¹­ ê´€ì°°ì ì‹œì ", "ì „ì§€ì  ì‘ê°€ ì‹œì "], correct: 0 },
                { question: "ì´ ì†Œì„¤ì˜ ë°°ê²½ì´ ë˜ëŠ” ê³„ì ˆì€?", answers: ["ë´„", "ì—¬ë¦„", "ê°€ì„"], correct: 0 },
                { question: "ì ìˆœì´ê°€ 'ë‚˜'ì—ê²Œ ê°ìë¥¼ ì¤€ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€?", answers: ["'ë‚˜'ë¥¼ ë™ì •í•´ì„œ", "'ë‚˜'ì—ê²Œ ê´€ì‹¬ì„ í‘œí˜„í•˜ë ¤ê³ ", "'ë‚˜'ë¥¼ ê³¨íƒ• ë¨¹ì´ë ¤ê³ "], correct: 1 },
                { question: "'ë‚˜'ê°€ ì ìˆœì´ì˜ ê°ìë¥¼ ê±°ì ˆí•œ ì´ìœ ëŠ”?", answers: ["ê°ìë¥¼ ì‹«ì–´í•´ì„œ", "ì ìˆœì´ì˜ í˜¸ì˜ë¥¼ ì˜¤í•´í•´ì„œ", "ë°°ê°€ ë¶ˆëŸ¬ì„œ"], correct: 1 },
                { question: "ì ìˆœì´ê°€ 'ë‚˜'ì˜ ì§‘ ì”¨ì•”íƒ‰ì„ ê´´ë¡­íˆëŠ” ì´ìœ ëŠ”?", answers: ["ë‹­ì‹¸ì›€ì„ ì¢‹ì•„í•´ì„œ", "'ë‚˜'ì— ëŒ€í•œ ì„œìš´í•¨ê³¼ ë³µìˆ˜ì‹¬", "ë‹­ì´ ë¯¸ì›Œì„œ"], correct: 1 },
                { question: "ì´ ì†Œì„¤ì—ì„œ ê°ˆë“±ì˜ ì›ì¸ì´ ë˜ëŠ” ì†Œì¬ëŠ”?", answers: ["ë‹­ì‹¸ì›€", "ê³ ì¶”ì¥", "ê°ì"], correct: 2 },
                { question: "'ë‚˜'ëŠ” ì ìˆœë„¤ ìˆ˜íƒ‰ì„ ì´ê¸°ê¸° ìœ„í•´ ìê¸° ë‹­ì—ê²Œ ë¬´ì—‡ì„ ë¨¹ì´ëŠ”ê°€?", answers: ["ë³´ì•½", "ê³ ì¶”ì¥", "ê°ì"], correct: 1 },
                { question: "'ë‚˜'ê°€ ì ìˆœë„¤ ë‹­ì„ ë•Œë ¤ì£½ì¸ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€?", answers: ["ìì‹ ì˜ ë‹­ì´ ê³„ì† ì ¸ì„œ í™”ê°€ ë‚˜ì„œ", "ì ìˆœì´ê°€ ì‹œì¼œì„œ", "ë‹­ì´ ë¶ˆìŒí•´ì„œ"], correct: 0 },
                { question: "'ë‚˜'ì™€ ì ìˆœì´ì˜ ê°ˆë“±ì´ í•´ì†Œë˜ê³  í™”í•´í•˜ëŠ” ê³„ê¸°ê°€ ë˜ëŠ” ì†Œì¬ëŠ”?", answers: ["ê°ì", "ë‹­", "ë™ë°±ê½ƒ"], correct: 2 },
                { question: "ì´ ì‘í’ˆì˜ ì›ƒìŒì„ ìœ ë°œí•˜ëŠ” ê°€ì¥ í° ìš”ì¸ì€?", answers: ["ì ìˆœì´ì˜ ì—‰ëš±í•œ í–‰ë™", "ì„œìˆ ì 'ë‚˜'ì˜ ì–´ìˆ˜ë£©í•¨", "ë‹­ë“¤ì˜ ìš°ìŠ¤ê½ìŠ¤ëŸ¬ìš´ ì‹¸ì›€"], correct: 1 },
                { question: "ì´ ì‘í’ˆì˜ êµ¬ì„± ë°©ì‹ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?", answers: ["ì‹œê°„ ìˆœì„œì— ë”°ë¥¸ êµ¬ì„±", "ê³¼ê±°ì™€ í˜„ì¬ê°€ êµì°¨ë˜ëŠ” ì—­ìˆœí–‰ì  êµ¬ì„±", "ì—¬ëŸ¬ ì´ì•¼ê¸°ë¥¼ ë‚˜ì—´í•˜ëŠ” êµ¬ì„±"], correct: 1 },
                { question: "'ëŠ ì§‘ì—” ì´ê±° ì—†ì§€?'ë¼ëŠ” ì ìˆœì´ì˜ ë§ì— ë‹´ê¸´ ì§„ì§œ ì˜ë„ëŠ”?", answers: ["ìë‘í•˜ë ¤ëŠ” ë§ˆìŒ", "ë¬´ì‹œí•˜ë ¤ëŠ” ë§ˆìŒ", "ê´€ì‹¬ì„ í‘œí˜„í•˜ëŠ” ë§ˆìŒ"], correct: 2 },
                { question: "ì´ ì†Œì„¤ì—ì„œ 'ë™ë°±ê½ƒ'ì˜ ì—­í• ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?", answers: ["ê°ˆë“±ì„ ì‹¬í™”ì‹œí‚´", "í–¥í† ì , ë‚­ë§Œì  ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í•¨", "ì£¼ì¸ê³µì˜ ê°€ë‚œì„ ìƒì§•í•¨"], correct: 1 },
                { question: "ì ìˆœì´ê°€ 'ë‚˜'ë¥¼ ëŒ€í•˜ëŠ” ë°©ì‹ì˜ íŠ¹ì§•ì€?", answers: ["ì§ì„¤ì ", "ë°˜ì–´ì ", "ìš°íšŒì "], correct: 1 },
                { question: "'ë‚˜'ì™€ ì ìˆœì´ ì§‘ì•ˆì˜ ê´€ê³„ëŠ” ì–´ë– í•œê°€?", answers: ["ëŒ€ë“±í•œ ê´€ê³„", "ì›ìˆ˜ ê´€ê³„", "ì§€ì£¼-ì†Œì‘ì¸ ê´€ê³„"], correct: 2 },
                { question: "ì ìˆœì´ê°€ 'ë‚˜'ì—ê²Œ 'ìš”ë‹´ë¶€í„° ë˜ ê·¸ë˜ ë´ë¼'ë¼ê³  ë§í•œ ì´ìœ ëŠ”?", answers: ["ì•ìœ¼ë¡œë„ ê³„ì† ê´´ë¡­íˆê² ë‹¤ëŠ” ê²½ê³ ", "ìì‹ ì˜ ë§ˆìŒì„ ë°›ì•„ë‹¬ë¼ëŠ” í‘œí˜„", "ë‹­ì„ ì£½ì¸ ê²ƒì— ëŒ€í•œ ìš©ì„œ"], correct: 1 },
                { question: "ì´ ì‘í’ˆì€ ì–´ë–¤ ë¶„ìœ„ê¸°ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•˜ê³  ìˆëŠ”ê°€?", answers: ["ë¹„ê·¹ì , ì• ìƒì ", "í•´í•™ì , í–¥í† ì ", "êµí›ˆì , ë¹„íŒì "], correct: 1 },
                { question: "ì‘í’ˆì˜ ë§ˆì§€ë§‰ì— 'ë‚˜'ì™€ ì ìˆœì´ê°€ ë™ë°±ê½ƒ ì†ì— íŒŒë¬»íˆëŠ” ì¥ë©´ì´ ì˜ë¯¸í•˜ëŠ” ë°”ëŠ”?", answers: ["ê°ˆë“±ì˜ ì ˆì •", "ìˆœìˆ˜í•œ ì‚¬ë‘ì˜ ì‹œì‘", "í˜„ì‹¤ë¡œë¶€í„°ì˜ ë„í”¼"], correct: 1 },
                { question: "ì´ ì‘í’ˆì˜ ì œëª©ì¸ 'ë™ë°±ê½ƒ'ì€ ì‹¤ì œë¡œëŠ” ì–´ë–¤ ê½ƒì„ ê°€ë¦¬í‚¤ëŠ”ê°€?", answers: ["ìƒê°•ë‚˜ë¬´ê½ƒ", "ì§„ë‹¬ë˜ê½ƒ", "ì‚°ìˆ˜ìœ ê½ƒ"], correct: 0 }
            ],
            'ì½ê¸°ì˜ ìƒí™œí™”': [
                { question: "ê¸€ì“´ì´ê°€ ì¤‘í•™êµ ì‹œì ˆ ë„ì„œë°˜ì„ ì„ íƒí•œ ì´ìœ ëŠ”?", answers: ["ì±…ì„ ì¢‹ì•„í•´ì„œ", "ì„ ìƒë‹˜ì˜ ì¶”ì²œìœ¼ë¡œ", "ëª¸ì„ ì›€ì§ì´ê¸° ì‹«ì–´ì„œ"], correct: 2 },
                { question: "ê¸€ì“´ì´ê°€ ì²˜ìŒ ì½ì€ ë°•ì§€ì›ì˜ ì†Œì„¤ì€ ë¬´ì—‡ì´ì—ˆëŠ”ê°€?", answers: ["ì–‘ë°˜ì „", "í˜¸ì§ˆ", "í—ˆìƒì „"], correct: 2 },
                { question: "ê¸€ì“´ì´ê°€ ë°•ì§€ì› ì†Œì„¤ì„ ê±°ë¶€ê° ì—†ì´ ì½ì€ ì´ìœ ëŠ”?", answers: ["ë‚´ìš©ì´ ì‰¬ì›Œì„œ", "ë¬´í˜‘ì§€ì— ìµìˆ™í•´ì„œ", "ì¹œêµ¬ê°€ ì¶”ì²œí•´ì„œ"], correct: 1 },
                { question: "ë¬´í˜‘ì§€ì™€ ë°•ì§€ì› ì†Œì„¤ì˜ ê³µí†µì ì€?", answers: ["ë¬¸ì²´ê°€ ì•„ë¦„ë‹µë‹¤", "ì£¼ì¸ê³µì˜ í–‰ì  êµ¬ì¡°", "ì½ê³  ë‚˜ë©´ ê¸°ì–µì— ë‚¨ëŠ”ë‹¤"], correct: 1 },
                { question: "ë°•ì§€ì› ì†Œì„¤ì´ ë¬´í˜‘ì§€ì™€ ë‹¤ë¥¸ ì ì€?", answers: ["ì¬ë¯¸ê°€ ì—†ë‹¤", "ìƒê°í•  ê±°ë¦¬ë¥¼ ì¤€ë‹¤", "ì£¼ì¸ê³µì´ íŒ¨ë°°í•œë‹¤"], correct: 1 },
                { question: "ê¸€ì“´ì´ëŠ” ë°•ì§€ì› ì†Œì„¤ì„ ë¬´ì—‡ì— ë¹„ìœ í–ˆëŠ”ê°€?", answers: ["ë³´ì•½", "ë³´ì„", "ë‹¤ë¦¬"], correct: 0 },
                { question: "ê¸€ì“´ì´ê°€ 'ëª‡ë°± ë…„ ì „ ì‚¬ëŒì˜ ìˆ¨ê²°'ì„ ëŠë‚€ ê²½í—˜ì€?", answers: ["ë…ì„œ", "ë°•ë¬¼ê´€ ê´€ëŒ", "ì—­ì‚¬ ê³µë¶€"], correct: 0 },
                { question: "ê¸€ì“´ì´ê°€ ì†Œì„¤ê°€ê°€ ëœ ê²°ì •ì ì¸ ê³„ê¸°ê°€ ëœ ì±…ì€?", answers: ["ë¬´í˜‘ì§€", "ë°•ì§€ì›ì˜ ì±…", "í˜„ëŒ€ ì†Œì„¤"], correct: 1 },
                { question: "ì´ ê¸€ì—ì„œ ê°•ì¡°í•˜ëŠ” ì½ê¸°ì˜ ê°€ì¹˜ëŠ”?", answers: ["ì§€ì‹ ìŠµë“", "ì •ì‹ ì„¸ê³„ì˜ ì„±ì¥", "ì„±ê³µ"], correct: 1 },
                { question: "ì œëª© ã€Œë§›ìˆëŠ” ì±…, ì¼ìƒì˜ ë³´ì•½ã€ì˜ ì˜ë¯¸ëŠ”?", answers: ["ì±…ì´ ë¹„ì‹¸ë‹¤", "ì±…ì´ ì •ì‹ ì„ í’ìš”ë¡­ê²Œ í•œë‹¤", "ì±…ì´ ë§›ìˆë‹¤"], correct: 1 },
                { question: "ê¸€ì“´ì´ê°€ ë°•ì§€ì› ì†Œì„¤ì— 'ë¿Œë“¯í•¨'ì„ ëŠë‚€ ì´ìœ ëŠ”?", answers: ["ë‚´ìš©ì´ ì¬ë¯¸ìˆì–´ì„œ", "ìš°ë¦¬ ì¡°ìƒì˜ ê¸€ì´ë¼ì„œ", "ì¹œêµ¬ë“¤ì—ê²Œ ìë‘í•´ì„œ"], correct: 1 },
                { question: "ê¸€ì“´ì´ê°€ ë§í•˜ëŠ” 'ì§„ì •í•œ ì¸ê°„ìœ¼ë¡œ ë‚˜ì•„ê°€ëŠ” í†µë¡œ'ëŠ”?", answers: ["ì—¬í–‰", "ì±…", "ëª…ìƒ"], correct: 1 },
                { question: "ë„ì„œë°˜ ì„ ìƒë‹˜ì´ í•™ìƒë“¤ì—ê²Œ ê¶Œì¥í•œ í™œë™ì€?", answers: ["ë…ì„œ í† ë¡ ", "ì„œí‰ ì“°ê¸°", "ë§ˆìŒì— ë“œëŠ” ì±… ì½ê¸°"], correct: 2 },
                { question: "ê¸€ì“´ì´ëŠ” í˜„ëŒ€ ì†Œì„¤ì„ ì–´ë–»ê²Œ ëŠê¼ˆëŠ”ê°€?", answers: ["ê°€ë³ê²Œ ëŠê»´ì§", "ì‹¬ì˜¤í•˜ê²Œ ëŠê»´ì§", "ì¬ë¯¸ì—†ê²Œ ëŠê»´ì§"], correct: 0 },
                { question: "ë°•ì§€ì› ì†Œì„¤ì„ ì½ìœ¼ë©° ê¸€ì“´ì´ì˜ ì •ì‹ ì„¸ê³„ê°€ ì–´ë–»ê²Œ ë˜ì—ˆë‹¤ê³  í–ˆëŠ”ê°€?", answers: ["í˜¼ë€ìŠ¤ëŸ¬ì›Œì§", "ë” ë„“ì–´ì§€ê³  ìˆ˜ì¤€ì´ ë†’ì•„ì§", "ë‹¨ìˆœí•´ì§"], correct: 1 },
                { question: "ê¸€ì“´ì´ì—ê²Œ íŠ¹ë³„ í™œë™ ì‹œê°„ì€ ì–´ë–¤ ì˜ë¯¸ì˜€ëŠ”ê°€?", answers: ["ì§€ë£¨í•œ ì‹œê°„", "ì¸ìƒì„ ë°”ê¾¼ ì‹œê°„", "ì¹œêµ¬ì™€ ë…¸ëŠ” ì‹œê°„"], correct: 1 },
                { question: "ì´ ê¸€ì˜ ê°ˆë˜ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?", answers: ["ì†Œì„¤", "ì‹œ", "ìˆ˜í•„"], correct: 2 },
                { question: "ê¸€ì“´ì´ê°€ ë§í•˜ëŠ” 'ê³ ì „'ì˜ íŠ¹ì§•ì´ ì•„ë‹Œ ê²ƒì€?", answers: ["ì½ì„ìˆ˜ë¡ ìƒˆë¡œìš´ ë§›ì´ ë‚¨", "ë¬¸ì¥ì´ í’ˆìœ„ ìˆê³  ì•„ë¦„ë‹¤ì›€", "í•œë‘ ë²ˆ ì½ê³  ë‚˜ë©´ ì¬ë¯¸ì—†ìŒ"], correct: 2 },
                { question: "ê¸€ì“´ì´ëŠ” ì±…ì„ í†µí•´ ì¸ê°„ì˜ ì–´ë–¤ ì„¸ê³„ì— ë‹¿ì„ ìˆ˜ ìˆë‹¤ê³  í–ˆëŠ”ê°€?", answers: ["ë¬¼ì§ˆì  ì„¸ê³„", "ì§€ê·¹í•œ ì •ì‹ ë¬¸í™”", "ì´ˆìì—°ì  ì„¸ê³„"], correct: 1 },
                { question: "ê¸€ì“´ì´ëŠ” ê¶ê·¹ì ìœ¼ë¡œ ë…ì„œê°€ ë¬´ì—‡ì„ ë³´ì—¬ì£¼ëŠ” ê¸¸ì´ë¼ê³  ë§í–ˆëŠ”ê°€?", answers: ["ë¶€ë¥¼ ì–»ëŠ” ê¸¸", "ì¸ê°„ë‹¤ìš´ ì‚¶ì„ ì¶”êµ¬í•˜ëŠ” ê¸¸", "ê¶Œë ¥ì„ ì¡ëŠ” ê¸¸"], correct: 1 }
            ],
            'ë‹´í™”': [
                { question: "í™”ìì™€ ì²­ìê°€ ì£¼ê³ ë°›ëŠ” ë°œí™”ì˜ ì—°ì†ì²´ë¥¼ ë¬´ì—‡ì´ë¼ê³  í•˜ëŠ”ê°€?", answers: ["ë¬¸ì¥", "ë‹´í™”", "ì–´ì ˆ"], correct: 1 },
                { question: "ë‹´í™”ì˜ êµ¬ì„± ìš”ì†Œê°€ ì•„ë‹Œ ê²ƒì€?", answers: ["í™”ì", "ì²­ì", "ë¬¸ë²•"], correct: 2 },
                { question: "ë‹´í™”ì˜ ë‚´ìš©ì´ ì£¼ì œë¥¼ í–¥í•´ ë°€ì ‘í•˜ê²Œ ì—°ê´€ë˜ëŠ” íŠ¹ì„±ì€?", answers: ["ì‘ì§‘ì„±", "í†µì¼ì„±", "ë§¥ë½ì„±"], correct: 1 },
                { question: "ë‹´í™”ë¥¼ êµ¬ì„±í•˜ëŠ” ë¬¸ì¥ë“¤ì´ í˜•ì‹ì ìœ¼ë¡œ ê¸´ë°€í•˜ê²Œ ì—°ê²°ë˜ëŠ” íŠ¹ì„±ì€?", answers: ["ì‘ì§‘ì„±", "í†µì¼ì„±", "ìƒí™©ì„±"], correct: 0 },
                { question: "ì‘ì§‘ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í‘œí˜„ì´ ì•„ë‹Œ ê²ƒì€?", answers: ["ì§€ì‹œ í‘œí˜„", "ì ‘ì† í‘œí˜„", "ê°íƒ„ í‘œí˜„"], correct: 2 },
                { question: "ë‹´í™”ì˜ í•´ì„ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì¥ë©´ ìì²´ì™€ ê´€ë ¨ëœ ë§¥ë½ì€?", answers: ["ìƒí™© ë§¥ë½", "ì‚¬íšŒÂ·ë¬¸í™”ì  ë§¥ë½", "ì—­ì‚¬ì  ë§¥ë½"], correct: 0 },
                { question: "ë‹´í™”ì˜ í•´ì„ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì‚¬íšŒÂ·ë¬¸í™”ì  ë°°ê²½, ê´€ìŠµ ë“±ê³¼ ê´€ë ¨ëœ ë§¥ë½ì€?", answers: ["ìƒí™© ë§¥ë½", "ì‚¬íšŒÂ·ë¬¸í™”ì  ë§¥ë½", "ì–¸ì–´ì  ë§¥ë½"], correct: 1 },
                { question: "í˜‘ë ¥ì˜ ì›ë¦¬ ì¤‘, ëŒ€í™” ëª©ì ì— í•„ìš”í•œ ë§Œí¼ë§Œ ì •ë³´ë¥¼ ì œê³µí•´ì•¼ í•œë‹¤ëŠ” ê²©ë¥ ì€?", answers: ["ì§ˆì˜ ê²©ë¥ ", "ì–‘ì˜ ê²©ë¥ ", "íƒœë„ì˜ ê²©ë¥ "], correct: 1 },
                { question: "í˜‘ë ¥ì˜ ì›ë¦¬ ì¤‘, ì§„ì‹¤ë˜ê³  íƒ€ë‹¹í•œ ê·¼ê±°ë¥¼ ë“¤ì–´ ë§í•´ì•¼ í•œë‹¤ëŠ” ê²©ë¥ ì€?", answers: ["ì§ˆì˜ ê²©ë¥ ", "ì–‘ì˜ ê²©ë¥ ", "ê´€ë ¨ì„±ì˜ ê²©ë¥ "], correct: 0 },
                { question: "í˜‘ë ¥ì˜ ì›ë¦¬ ì¤‘, ëª¨í˜¸í•˜ê±°ë‚˜ ì¤‘ì˜ì  í‘œí˜„ì„ í”¼í•´ì•¼ í•œë‹¤ëŠ” ê²©ë¥ ì€?", answers: ["ê´€ë ¨ì„±ì˜ ê²©ë¥ ", "íƒœë„ì˜ ê²©ë¥ ", "ì§ˆì˜ ê²©ë¥ "], correct: 1 },
                { question: "ê³µì†ì„±ì˜ ì›ë¦¬ ì¤‘, ìƒëŒ€ì—ê²Œ ë¶€ë‹´ì€ ìµœì†Œí™”í•˜ê³  ì´ìµì€ ìµœëŒ€í™”í•˜ë¼ëŠ” ê²©ë¥ ì€?", answers: ["ê´€ìš©ì˜ ê²©ë¥ ", "ì°¬ë™ì˜ ê²©ë¥ ", "ìš”ë ¹ì˜ ê²©ë¥ "], correct: 2 },
                { question: "ê³µì†ì„±ì˜ ì›ë¦¬ ì¤‘, ìì‹ ì— ëŒ€í•œ ì¹­ì°¬ì€ ìµœì†Œí™”í•˜ê³  ê²¸ì†í•˜ë¼ëŠ” ê²©ë¥ ì€?", answers: ["ê²¸ì–‘ì˜ ê²©ë¥ ", "ë™ì˜ì˜ ê²©ë¥ ", "ìš”ë ¹ì˜ ê²©ë¥ "], correct: 0 },
                { question: "ê³µì†ì„±ì˜ ì›ë¦¬ ì¤‘, ìƒëŒ€ë°©ì— ëŒ€í•œ ë¹„ë°©ì€ ìµœì†Œí™”í•˜ê³  ì¹­ì°¬ì€ ìµœëŒ€í™”í•˜ë¼ëŠ” ê²©ë¥ ì€?", answers: ["ìš”ë ¹ì˜ ê²©ë¥ ", "ì°¬ë™ì˜ ê²©ë¥ ", "ê´€ìš©ì˜ ê²©ë¥ "], correct: 1 },
                { question: "ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì¸ì •ë°›ê³  ì¡´ì¤‘ë°›ê³  ì‹¶ì€ ìš•êµ¬ì™€ ê´€ë ¨ëœ ì²´ë©´ì€?", answers: ["ì ê·¹ì  ì²´ë©´", "ì†Œê·¹ì  ì²´ë©´", "ê³µê²©ì  ì²´ë©´"], correct: 0 },
                { question: "ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë°©í•´ë°›ì§€ ì•Šê³  ììœ ë¡­ê²Œ í–‰ë™í•˜ê³  ì‹¶ì€ ìš•êµ¬ì™€ ê´€ë ¨ëœ ì²´ë©´ì€?", answers: ["ì ê·¹ì  ì²´ë©´", "ê³µê²©ì  ì²´ë©´", "ì†Œê·¹ì  ì²´ë©´"], correct: 2 },
                { question: "ëª…ë ¹ë¬¸ë³´ë‹¤ ì˜ë¬¸ë¬¸ìœ¼ë¡œ ë¶€íƒí•˜ëŠ” ê²ƒì´ ìƒëŒ€ì˜ ì–´ë–¤ ì²´ë©´ì„ ì§€ì¼œì£¼ëŠ” ê²ƒì¸ê°€?", answers: ["ì ê·¹ì  ì²´ë©´", "ì†Œê·¹ì  ì²´ë©´", "ì‚¬íšŒì  ì²´ë©´"], correct: 1 },
                { question: "A: 'ì˜¤ëŠ˜ ì €ë… ë­ ë¨¹ì„ê¹Œ?' B: 'ì–´ì œ ë³¸ ë“œë¼ë§ˆ ì •ë§ ì¬ë°Œë”ë¼.' BëŠ” ì–´ë–¤ ê²©ë¥ ì„ ì–´ê²¼ëŠ”ê°€?", answers: ["ì§ˆì˜ ê²©ë¥ ", "ì–‘ì˜ ê²©ë¥ ", "ê´€ë ¨ì„±ì˜ ê²©ë¥ "], correct: 2 },
                { question: "'ì œê°€ í•œ ê±´ ë³„ë¡œ ì—†ê³  ë‹¤ íŒ€ì›ë“¤ ë•ë¶„ì…ë‹ˆë‹¤.'ëŠ” ì–´ë–¤ ê²©ë¥ ì„ ì§€í‚¨ í‘œí˜„ì¸ê°€?", answers: ["ê´€ìš©ì˜ ê²©ë¥ ", "ìš”ë ¹ì˜ ê²©ë¥ ", "ì°¬ë™ì˜ ê²©ë¥ "], correct: 0 },
                { question: "'ë„¤ ìƒê°ë„ ì¼ë¦¬ê°€ ìˆì§€ë§Œ, ì´ ë¶€ë¶„ì€ ì¡°ê¸ˆ ë‹¤ë¥¸ ê²ƒ ê°™ì•„.'ëŠ” ì–´ë–¤ ê²©ë¥ ì„ ì§€í‚¨ í‘œí˜„ì¸ê°€?", answers: ["ì°¬ë™ì˜ ê²©ë¥ ", "ê²¸ì–‘ì˜ ê²©ë¥ ", "ë™ì˜ì˜ ê²©ë¥ "], correct: 2 },
                { question: "ìš°ë¦¬ë‚˜ë¼ì˜ 'ì°¨ë¦° ê±´ ì—†ì§€ë§Œ ë§ì´ ë¨¹ì–´ë¼'ì™€ ê°™ì€ í‘œí˜„ì„ ì´í•´í•˜ê¸° ìœ„í•´ ê³ ë ¤í•´ì•¼ í•  ë§¥ë½ì€?", answers: ["ìƒí™© ë§¥ë½", "ì‚¬íšŒÂ·ë¬¸í™”ì  ë§¥ë½", "ê°œì¸ì  ë§¥ë½"], correct: 1 }
            ],
            'ë¨¼ í›„ì¼': [
                { question: "ì´ ì‹œì˜ í•µì‹¬ í‘œí˜„ ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?", answers: ["ì—­ì„¤", "ë°˜ì–´", "í’ì"], correct: 1 },
                { question: "í™”ìê°€ 'ìŠì—ˆë…¸ë¼'ë¼ê³  ë§í•˜ì§€ë§Œ, ì‹¤ì œ ì†ë§ˆìŒì€ ì–´ë– í•œê°€?", answers: ["ì •ë§ë¡œ ìŠì—ˆë‹¤", "ìŠì§€ ëª»í•˜ê³  ê·¸ë¦¬ì›Œí•œë‹¤", "ì¦ì˜¤í•˜ê³  ìˆë‹¤"], correct: 1 },
                { question: "ì´ ì‹œì˜ í™”ìëŠ” ì–´ë–¤ ìƒí™©ì„ ê°€ì •í•˜ê³  ìˆëŠ”ê°€?", answers: ["'ë‹¹ì‹ 'ê³¼ ì¬íšŒí•˜ëŠ” ìƒí™©", "ë¨¼ í›—ë‚  'ë‹¹ì‹ 'ì´ ì°¾ì•„ì˜¤ëŠ” ìƒí™©", "'ë‹¹ì‹ 'ì„ ì˜ì›íˆ ëª» ë³´ëŠ” ìƒí™©"], correct: 1 },
                { question: "ì´ ì‹œì—ì„œ ìš´ìœ¨ì„ í˜•ì„±í•˜ëŠ” ìš”ì†Œê°€ ì•„ë‹Œ ê²ƒì€?", answers: ["3ìŒë³´ì˜ ë°˜ë³µ", "'-ë…¸ë¼'ì˜ ë°˜ë³µ", "ìƒ‰ì±„ì–´ì˜ ë°˜ë³µ"], correct: 2 },
                { question: "'ì˜¤ëŠ˜ë„ ì–´ì œë„ ì•„ë‹ˆ ìŠê³ 'ë¼ëŠ” êµ¬ì ˆì„ í†µí•´ ì•Œ ìˆ˜ ìˆëŠ” ê²ƒì€?", answers: ["í™”ìì˜ ë³€ë•ìŠ¤ëŸ¬ìš´ ë§ˆìŒ", "í™”ìì˜ ì§„ì‹¬", "í™”ìì˜ ë¬´ê´€ì‹¬"], correct: 1 },
                { question: "ë°˜ì–´ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì–»ëŠ” íš¨ê³¼ë¡œ ê±°ë¦¬ê°€ ë¨¼ ê²ƒì€?", answers: ["í™”ìì˜ ì •ì„œ ê°•ì¡°", "ë…ìì˜ í¥ë¯¸ ìœ ë°œ", "ë‚´ìš©ì„ ì§ì ‘ì ìœ¼ë¡œ ì „ë‹¬"], correct: 2 },
                { question: "í™”ìëŠ” 'ë‹¹ì‹ 'ì´ ìì‹ ì„ ë‚˜ë¬´ë„ ê²ƒì„ ì˜ˆìƒí•˜ê³  ìˆë‹¤. (O/X)", answers: ["O", "X"], correct: 0 },
                { question: "ì´ ì‹œì˜ ì „ì²´ì ì¸ ì–´ì¡°ëŠ” ì–´ë– í•œê°€?", answers: ["ê²©ì •ì , ë‚¨ì„±ì ", "ì• ìƒì , ì—¬ì„±ì ", "í•´í•™ì , í’ìì "], correct: 1 },
                { question: "'ë¬´ì²™ ê·¸ë¦¬ë‹¤ê°€ ìŠì—ˆë…¸ë¼'ë¼ëŠ” í‘œí˜„ì˜ ëª¨ìˆœì€ ë¬´ì—‡ì¸ê°€?", answers: ["ê·¸ë¦¬ì›Œí•˜ë©´ì„œ ë™ì‹œì— ìŠì„ ìˆ˜ëŠ” ì—†ìŒ", "ë¬´ì²™ê³¼ ìŠì—ˆë…¸ë¼ì˜ ì˜ë¯¸ ì¶©ëŒ", "ì‹œì  í—ˆìš©ì˜ ì˜¤ë¥˜"], correct: 0 },
                { question: "ì´ ì‹œì˜ ì£¼ì œëŠ” ë¬´ì—‡ì¸ê°€?", answers: ["ì´ë³„ì˜ ê·¹ë³µ", "ë– ë‚˜ê°„ ì„ì— ëŒ€í•œ ë³€í•¨ì—†ëŠ” ì‚¬ë‘", "ì¬íšŒì— ëŒ€í•œ í¬ë§"], correct: 1 },
                { question: "ì´ ì‹œëŠ” ì´ ëª‡ ê°œì˜ ì—°ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ”ê°€?", answers: ["3ì—°", "4ì—°", "5ì—°"], correct: 1 },
                { question: "ê° ì—°ì˜ ë§ˆì§€ë§‰ í–‰ì— ë°˜ë³µë˜ëŠ” ì‹œì–´ëŠ” ë¬´ì—‡ì¸ê°€?", answers: ["ë¨¼ í›—ë‚ ", "ë‚˜ë¬´ë¼ë©´", "ìŠì—ˆë…¸ë¼"], correct: 2 },
                { question: "í™”ìì˜ ì •ì„œê°€ ì ì¸µì ìœ¼ë¡œ ì‹¬í™”ë˜ê³  ìˆìŒì„ ë³´ì—¬ì£¼ëŠ” ì‹œì–´ëŠ”?", answers: ["ê·¸ë•Œì— -> ê·¸ë˜ë„ -> ì˜¤ëŠ˜ë„ ì–´ì œë„", "ìŠì—ˆë…¸ë¼ -> ìŠì—ˆë…¸ë¼ -> ìŠì—ˆë…¸ë¼", "ë‹¹ì‹ ì´ -> ë‹¹ì‹ ì´ -> ë‹¹ì‹ ì´"], correct: 0 },
                { question: "ì´ ì‹œì—ì„œ 'ë‹¹ì‹ 'ì€ í™”ìì—ê²Œ ì–´ë–¤ ì¡´ì¬ì¸ê°€?", answers: ["ì›ë§ì˜ ëŒ€ìƒ", "ìŠê³  ì‹¶ì€ ì¡´ì¬", "ê·¸ë¦¬ì›€ì˜ ëŒ€ìƒ"], correct: 2 },
                { question: "'ë¯¿ê¸°ì§€ ì•Šì•„ì„œ ìŠì—ˆë…¸ë¼'ë¼ëŠ” ë§ì˜ ì†ëœ»ì€?", answers: ["ë„ˆë¬´ ê·¸ë¦¬ì›Œ ë¯¿ì„ ìˆ˜ ì—†ì—ˆë‹¤", "ë‹¹ì‹ ì„ ë¯¿ì„ ìˆ˜ ì—†ì–´ ìŠì—ˆë‹¤", "ë‹¹ì‹ ê³¼ì˜ ì´ë³„ì´ ë¯¿ê¸°ì§€ ì•Šì•˜ë‹¤"], correct: 2 },
                { question: "ì´ ì‹œì˜ ì‘ê°€ëŠ” ëˆ„êµ¬ì¸ê°€?", answers: ["í•œìš©ìš´", "ê¹€ì†Œì›”", "ì •ì§€ìš©"], correct: 1 },
                { question: "í™”ìëŠ” 'ë‹¹ì‹ 'ì´ ë‹¤ì‹œ ì°¾ì•„ì˜¬ ê²ƒì´ë¼ê³  í™•ì‹ í•˜ê³  ìˆë‹¤. (O/X)", answers: ["O", "X"], correct: 0 },
                { question: "ì´ ì‹œì˜ ìš´ìœ¨ì€ ì£¼ë¡œ ë¬´ì—‡ì„ í†µí•´ í˜•ì„±ë˜ëŠ”ê°€?", answers: ["ê¸€ì ìˆ˜ì˜ ê·œì¹™ì  ë°°ì—´", "ìœ ì‚¬í•œ êµ¬ë¬¸ê³¼ ì‹œì–´ì˜ ë°˜ë³µ", "í–‰ì˜ ê¸¸ì´ ë³€í™”"], correct: 1 },
                { question: "ë°˜ì–´ë²•ì„ í†µí•´ í™”ìì˜ ì–´ë–¤ ê°ì •ì´ ë”ìš± ì• ì ˆí•˜ê²Œ ëŠê»´ì§€ëŠ”ê°€?", answers: ["ë¶„ë…¸", "ê·¸ë¦¬ì›€", "ê¸°ì¨"], correct: 1 },
                { question: "ì´ ì‹œëŠ” ë¯¸ë˜ì˜ ìƒí™©ì„ ì„¤ì •í•˜ì—¬ í™”ìì˜ í˜„ì¬ ì‹¬ì •ì„ ë“œëŸ¬ë‚¸ë‹¤. (O/X)", answers: ["O", "X"], correct: 0 }
            ],
            'ì–‘ë°˜ì „': [
                { question: "ì´ ì‘í’ˆì˜ í•µì‹¬ì ì¸ í‘œí˜„ ë°©ë²•ì€?", answers: ["ë°˜ì–´", "ì—­ì„¤", "í’ì"], correct: 2 },
                { question: "ì´ ì‘í’ˆì´ ë¹„íŒí•˜ê³ ì í•˜ëŠ” ëŒ€ìƒì€?", answers: ["ê°€ë‚œí•œ í‰ë¯¼", "ë¬´ëŠ¥í•˜ê³  ë¶€ë„ë•í•œ ì–‘ë°˜ ê³„ì¸µ", "ì‹ í¥ ë¶€ì ê³„ì¸µ"], correct: 1 },
                { question: "ì‘í’ˆì˜ ì‹œëŒ€ì  ë°°ê²½ì€ ì–¸ì œì¸ê°€?", answers: ["ì¡°ì„  ì „ê¸°", "ì¡°ì„  í›„ê¸°", "ê³ ë ¤ ì‹œëŒ€"], correct: 1 },
                { question: "ê°€ë‚œí•œ ì–‘ë°˜ì´ ê´€ì²­ì˜ ê³¡ì‹ì„ ê°šì§€ ëª»í•˜ì, ê·¸ ì–‘ë°˜ ì‹ ë¶„ì„ ì‚¬ë ¤ê³  í•œ ì¸ë¬¼ì€?", answers: ["êµ°ìˆ˜", "ë¶€ì", "ìƒì¸"], correct: 1 },
                { question: "ì²« ë²ˆì§¸ ë§¤ë§¤ ì¦ì„œì— ë‹´ê¸´ ë‚´ìš©ì€ ì£¼ë¡œ ë¬´ì—‡ì— ê´€í•œ ê²ƒì¸ê°€?", answers: ["ì–‘ë°˜ì´ ëˆ„ë¦´ ìˆ˜ ìˆëŠ” íŠ¹ê¶Œ", "ì–‘ë°˜ì´ ì§€ì¼œì•¼ í•  í—ˆë¡€í—ˆì‹", "ì–‘ë°˜ì˜ ì¬ì‚° ëª©ë¡"], correct: 1 },
                { question: "ë‘ ë²ˆì§¸ ë§¤ë§¤ ì¦ì„œì— ë‹´ê¸´ ë‚´ìš©ì€ ì£¼ë¡œ ë¬´ì—‡ì— ê´€í•œ ê²ƒì¸ê°€?", answers: ["ì–‘ë°˜ìœ¼ë¡œì„œì˜ ë„ë•ì  ì˜ë¬´", "ë°±ì„±ì„ ì°©ì·¨í•˜ëŠ” ì–‘ë°˜ì˜ íŠ¹ê¶Œ", "ë‚˜ë¼ì— ì¶©ì„±í•˜ëŠ” ë°©ë²•"], correct: 1 },
                { question: "ë¶€ìê°€ ê²°êµ­ ì–‘ë°˜ì´ ë˜ê¸°ë¥¼ í¬ê¸°í•œ ì´ìœ ëŠ”?", answers: ["ëˆì´ ì•„ê¹Œì›Œì„œ", "ì–‘ë°˜ì˜ ì‚¶ì´ ì¬ë¯¸ì—†ê³  ë¶€ë‹¹í•´ì„œ", "êµ°ìˆ˜ê°€ ë§ë ¤ì„œ"], correct: 1 },
                { "question": "'ì–‘ë°˜ì€ í•œ í‘¼ì–´ì¹˜ë„ ì•ˆ ë˜ëŠ”êµ¬ë ¤!'ë¼ëŠ” ë§ì€ ì–‘ë°˜ì˜ ì–´ë–¤ ì ì„ ë¹„íŒí•˜ëŠ”ê°€?", "answers": ["ë¹„ë„ë•ì„±", "ìœ„ì„ ", "ê²½ì œì  ë¬´ëŠ¥"], "correct": 2 },
                { "question": "ì´ ì†Œì„¤ì—ì„œ 'êµ°ìˆ˜'ì˜ ì—­í• ì€ ë¬´ì—‡ì¸ê°€?", "answers": ["ì–‘ë°˜ì„ ì˜¹í˜¸í•¨", "ë¶€ìì˜ í¸ì„ ë“¦", "ì‚¬ê±´ì„ ì¤‘ì¬í•˜ê³  í’ìë¥¼ ì‹¬í™”ì‹œí‚´"], "correct": 2 },
                { "question": "ì´ ì‘í’ˆì„ í†µí•´ ì•Œ ìˆ˜ ìˆëŠ” ì¡°ì„  í›„ê¸° ì‚¬íšŒì˜ ëª¨ìŠµì€?", "answers": ["ì‹ ë¶„ì œê°€ ë”ìš± ê³µê³ í•´ì§", "ì‹ ë¶„ì œê°€ í”ë“¤ë¦¬ê³  ìˆìŒ", "ëª¨ë‘ê°€ í‰ë“±í•´ì§"], "correct": 1 },
                { "question": "ì´ ì‘í’ˆì˜ ì‘ê°€ëŠ” ëˆ„êµ¬ì¸ê°€?", "answers": ["ë°•ì§€ì›", "ì •ì•½ìš©", "í—ˆê· "], "correct": 0 },
                { "question": "ì–‘ë°˜ì˜ ì•„ë‚´ê°€ ë‚¨í¸ì„ ë‚˜ë¬´ë€ ì´ìœ ëŠ”?", "answers": ["ë°”ëŒì„ í”¼ì›Œì„œ", "ëˆì„ ë²Œì§€ ëª»í•´ì„œ", "ì±… ì½ê¸°ê°€ í™˜ê³¡ ê°šëŠ” ë° ì†Œìš©ì—†ì–´ì„œ"], "correct": 2 },
                { "question": "ë¶€ìê°€ ì–‘ë°˜ì´ ë˜ê³  ì‹¶ì–´ í–ˆë˜ ì´ìœ ëŠ”?", "answers": ["ì¡´ê·€í•œ ëŒ€ìš°ë¥¼ ë°›ê³  ì‹¶ì–´ì„œ", "ë²¼ìŠ¬ì„ í•˜ê³  ì‹¶ì–´ì„œ", "ë” ë§ì€ ëˆì„ ë²Œê³  ì‹¶ì–´ì„œ"], "correct": 0 },
                { "question": "ì²« ë²ˆì§¸ ì¦ì„œì˜ ë‚´ìš©ì´ ì•„ë‹Œ ê²ƒì€?", "answers": ["ëˆì„ ë§Œì§€ì§€ ë§ ê²ƒ", "ì˜¤ê²½ì— ì¼ì–´ë‚  ê²ƒ", "ì´ì›ƒì˜ ì†Œë¥¼ ë¨¼ì € ì“¸ ê²ƒ"], "correct": 2 },
                { "question": "ë‘ ë²ˆì§¸ ì¦ì„œë¥¼ ë“£ê³  ë¶€ìê°€ í•œ ë§ 'ì¥ì°¨ ë‚˜ë¥¼ ë„ë‘‘ë†ˆìœ¼ë¡œ ë§Œë“¤ ì…ˆì…ë‹ˆê¹Œ?'ê°€ ë¹„íŒí•˜ëŠ” ê²ƒì€?", "answers": ["ì–‘ë°˜ì˜ ë¬´ëŠ¥", "ì–‘ë°˜ì˜ íš¡í¬", "ì–‘ë°˜ì˜ ìœ„ì„ "], "correct": 1 },
                { "question": "ì´ ì†Œì„¤ì€ ì¸ë¬¼ì˜ í–‰ë™ì„ í†µí•´ ëŒ€ìƒì„ ë¹„íŒí•˜ëŠ” ì–´ë–¤ ë°©ë²•ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ”ê°€?", "answers": ["ì§ì ‘ì  ë¹„íŒ", "ìš°íšŒì  ë¹„íŒ(í’ì)", "ê°ì •ì  í˜¸ì†Œ"], "correct": 1 },
                { "question": "ì‘í’ˆ ì† 'ì–‘ë°˜'ì€ ì–´ë–¤ ì¸ë¬¼ ìœ í˜•ì„ ëŒ€í‘œí•˜ëŠ”ê°€?", "answers": ["ì„±ê³µí•œ ì–‘ë°˜", "ê¹¨ì–´ìˆëŠ” ì–‘ë°˜", "ëª°ë½í•˜ëŠ” ì–‘ë°˜"], "correct": 2 },
                { "question": "ì‘í’ˆ ì† 'ë¶€ì'ëŠ” ì–´ë–¤ ê³„ì¸µì„ ëŒ€í‘œí•˜ëŠ”ê°€?", "answers": ["ì‹ í¥ ìƒì¸ ê³„ì¸µ", "ì „í†µ ì–‘ë°˜ ê³„ì¸µ", "ê°€ë‚œí•œ ë†ë¯¼ ê³„ì¸µ"], "correct": 0 },
                { "question": "ì‘ê°€ê°€ ë‘ ê°œì˜ ë‹¤ë¥¸ ë‚´ìš©ì˜ ì¦ì„œë¥¼ ë§Œë“  ì˜ë„ëŠ”?", "answers": ["ì–‘ë°˜ì˜ ì´ì¤‘ì„±ì„ í­ë¡œí•˜ê¸° ìœ„í•´", "ë¶€ìì—ê²Œ ì„ íƒê¶Œì„ ì£¼ê¸° ìœ„í•´", "ë…ìì—ê²Œ ì¬ë¯¸ë¥¼ ì£¼ê¸° ìœ„í•´"], "correct": 0 },
                { "question": "ì´ ì‘í’ˆì€ ì–´ë–¤ ë¬¸ì²´ë¡œ ì“°ì—¬ ìˆëŠ”ê°€?", "answers": ["í•œê¸€ì²´", "í•œë¬¸ì²´", "ì´ë‘"], "correct": 1 }
            ]
        };
        
        let carPosition, score, currentQuestionIndex, gameLoopId, playerName, currentQuizData, currentQuizKey;
        let isGameActive = false;
        let questionInProgress = false;

        const initGame = () => {
            carPosition = 1; score = 0; currentQuestionIndex = 0;
            isGameActive = true; questionInProgress = false;
            elements.playerInfo.classList.remove('hidden');
            elements.scoreDisplay.classList.remove('hidden');
            elements.playerNameDisplay.textContent = playerName;
            document.querySelectorAll('.road-line').forEach(line => line.style.animationPlayState = 'running');
            updateScore();
            shuffleQuiz();
            loadQuestion();
            updateCarPosition();
            elements.quizSelectionContainer.classList.add('hidden');
            elements.startScreen.classList.add('hidden');
            if (gameLoopId) cancelAnimationFrame(gameLoopId);
            gameLoopId = requestAnimationFrame(gameLoop);
        };

        const gameLoop = () => {
            if (!isGameActive) return;
            const carRect = elements.car.getBoundingClientRect();
            const answersRect = elements.answersContainer.getBoundingClientRect();
            if (questionInProgress && answersRect.bottom > carRect.top && answersRect.top < carRect.bottom) {
                handleCollision();
            }
            if (questionInProgress && answersRect.top > window.innerHeight) {
                handleCollision(true);
            }
            gameLoopId = requestAnimationFrame(gameLoop);
        };
        
        const handleCollision = (missed = false) => {
            if (!questionInProgress) return;
            questionInProgress = false;
            elements.answersContainer.style.animationPlayState = 'paused';
            const currentQuiz = currentQuizData[currentQuestionIndex];
            const correctGate = elements.answersContainer.children[currentQuiz.correct];
            if (missed) {
                if (correctGate) correctGate.classList.replace('bg-blue-500', 'bg-yellow-500');
                playSound('incorrect');
            } else {
                if (carPosition === currentQuiz.correct) {
                    score += 5; updateScore();
                    correctGate.classList.replace('bg-blue-500', 'bg-green-500');
                    playSound('correct');
                } else {
                    const wrongGate = elements.answersContainer.children[carPosition];
                    if (wrongGate) wrongGate.classList.replace('bg-blue-500', 'bg-red-600');
                    if (correctGate) correctGate.classList.replace('bg-blue-500', 'bg-green-500');
                    playSound('incorrect');
                }
            }
            currentQuestionIndex++;
            setTimeout(loadQuestion, 1000);
        };

        const checkAnswerNow = () => { if (questionInProgress) handleCollision(false); };

        const shuffleQuiz = () => {
            for (let i = currentQuizData.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [currentQuizData[i], currentQuizData[j]] = [currentQuizData[j], currentQuizData[i]];
            }
        };

        const loadQuestion = () => {
            if (currentQuestionIndex >= currentQuizData.length) {
                endGame();
                return;
            }
            questionInProgress = true;
            const currentQuiz = currentQuizData[currentQuestionIndex];
            elements.question.textContent = `Q${currentQuestionIndex + 1}. ${currentQuiz.question}`;
            elements.answersContainer.innerHTML = '';
            currentQuiz.answers.forEach((answer) => {
                const answerEl = document.createElement('div');
                answerEl.className = 'w-1/3 h-full flex items-center justify-center text-white text-base md:text-lg font-bold p-2 text-center bg-blue-500 bg-opacity-75 border-2 border-blue-300 rounded-lg';
                answerEl.textContent = answer;
                elements.answersContainer.appendChild(answerEl);
            });
            elements.answersContainer.classList.remove('falling');
            void elements.answersContainer.offsetWidth;
            elements.answersContainer.style.animationPlayState = 'running';
            elements.answersContainer.classList.add('falling');
        };

        const endGame = async () => {
            isGameActive = false;
            cancelAnimationFrame(gameLoopId);
            document.querySelectorAll('.road-line').forEach(line => line.style.animationPlayState = 'paused');
            await saveScore(playerName, score, currentQuizKey);
            await displayLeaderboard(currentQuizKey);
            elements.question.textContent = `í€´ì¦ˆ ì™„ë£Œ! ìµœì¢… ì ìˆ˜: ${score}ì `;
            elements.answersContainer.innerHTML = '';
            elements.playerInfo.classList.add('hidden');
            elements.scoreDisplay.classList.add('hidden');
            elements.startTitle.textContent = "ê²Œì„ í´ë¦¬ì–´!";
            elements.startDesc.innerHTML = `ìµœì¢… ì ìˆ˜: <span class="text-2xl text-white font-bold">${score}</span>ì `;
            elements.nameInputContainer.classList.add('hidden');
            elements.quizSelectionContainer.classList.add('hidden');
            elements.leaderboard.classList.remove('hidden');
            elements.restartContainer.classList.remove('hidden'); 
            elements.startScreen.classList.remove('hidden');
        };

        const updateCarPosition = () => {
            const laneWidth = elements.gameScreen.offsetWidth / 3;
            elements.car.style.left = `${(carPosition * laneWidth) + (laneWidth / 2)}px`;
        };

        const moveCar = (direction) => {
            if (!isGameActive) return;
            if (direction === 'left' && carPosition > 0) carPosition--;
            else if (direction === 'right' && carPosition < 2) carPosition++;
            updateCarPosition();
        };

        const updateScore = () => { elements.score.textContent = score; };

        const saveScore = async (name, score, quizKey) => {
            if (!db) return;
            const collectionName = `haesol-lala-quiz-scores-${quizKey}`;
            try { await addDoc(collection(db, collectionName), { name, score, createdAt: serverTimestamp() }); } 
            catch (e) { console.error("Error adding document: ", e); }
        };

        const displayLeaderboard = async (quizKey) => {
            if (!db) return;
            const collectionName = `haesol-lala-quiz-scores-${quizKey}`;
            const quizTitle = Object.keys(quizzes).find(key => key.replace(/[^a-zA-Z0-9ê°€-í£]/g, '') === quizKey);
            elements.leaderboardTitle.textContent = `ğŸ† ${quizTitle} ëª…ì˜ˆì˜ ì „ë‹¹ ğŸ†`;
            elements.leaderboardList.innerHTML = '<li>ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</li>';
            try {
                const q = query(collection(db, collectionName), orderBy("score", "desc"), limit(5));
                const querySnapshot = await getDocs(q);
                elements.leaderboardList.innerHTML = '';
                if (querySnapshot.empty) {
                    elements.leaderboardList.innerHTML = '<li>ì•„ì§ ë­í‚¹ì´ ì—†ìŠµë‹ˆë‹¤.</li>';
                    return;
                }
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const li = document.createElement('li');
                    li.innerHTML = `<span>${data.name}</span><span>${data.score}ì </span>`;
                    elements.leaderboardList.appendChild(li);
                });
            } catch (e) {
                console.error("Error getting documents: ", e);
                elements.leaderboardList.innerHTML = '<li>ë­í‚¹ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</li>';
            }
        };

        const populateQuizOptions = () => {
            elements.quizOptions.innerHTML = ''; 
            const finalQuizzes = {
                'ì—„ë§ˆ ê±±ì •': quizzes['ì—„ë§ˆ ê±±ì •'],
                'ë™ë°±ê½ƒ': [
                    { question: "ì´ ì†Œì„¤ì˜ ì„œìˆ ìëŠ” ëˆ„êµ¬ì¸ê°€?", answers: ["ì ìˆœì´", "ë‚˜", "ì‘ê°€"], correct: 1 },
                    { question: "ì´ ì†Œì„¤ì˜ ì„œìˆ  ë°©ì‹(ì‹œì )ì€ ë¬´ì—‡ì¸ê°€?", answers: ["1ì¸ì¹­ ì£¼ì¸ê³µ ì‹œì ", "1ì¸ì¹­ ê´€ì°°ì ì‹œì ", "ì „ì§€ì  ì‘ê°€ ì‹œì "], correct: 0 },
                    { question: "ì´ ì†Œì„¤ì˜ ë°°ê²½ì´ ë˜ëŠ” ê³„ì ˆì€?", answers: ["ë´„", "ì—¬ë¦„", "ê°€ì„"], correct: 0 },
                    { question: "ì ìˆœì´ê°€ 'ë‚˜'ì—ê²Œ ê°ìë¥¼ ì¤€ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€?", answers: ["'ë‚˜'ë¥¼ ë™ì •í•´ì„œ", "'ë‚˜'ì—ê²Œ ê´€ì‹¬ì„ í‘œí˜„í•˜ë ¤ê³ ", "'ë‚˜'ë¥¼ ê³¨íƒ• ë¨¹ì´ë ¤ê³ "], correct: 1 },
                    { question: "'ë‚˜'ê°€ ì ìˆœì´ì˜ ê°ìë¥¼ ê±°ì ˆí•œ ì´ìœ ëŠ”?", answers: ["ê°ìë¥¼ ì‹«ì–´í•´ì„œ", "ì ìˆœì´ì˜ í˜¸ì˜ë¥¼ ì˜¤í•´í•´ì„œ", "ë°°ê°€ ë¶ˆëŸ¬ì„œ"], correct: 1 },
                    { question: "ì ìˆœì´ê°€ 'ë‚˜'ì˜ ì§‘ ì”¨ì•”íƒ‰ì„ ê´´ë¡­íˆëŠ” ì´ìœ ëŠ”?", answers: ["ë‹­ì‹¸ì›€ì„ ì¢‹ì•„í•´ì„œ", "'ë‚˜'ì— ëŒ€í•œ ì„œìš´í•¨ê³¼ ë³µìˆ˜ì‹¬", "ë‹­ì´ ë¯¸ì›Œì„œ"], correct: 1 },
                    { question: "ì´ ì†Œì„¤ì—ì„œ ê°ˆë“±ì˜ ì›ì¸ì´ ë˜ëŠ” ì†Œì¬ëŠ”?", answers: ["ë‹­ì‹¸ì›€", "ê³ ì¶”ì¥", "ê°ì"], correct: 2 },
                    { question: "'ë‚˜'ëŠ” ì ìˆœë„¤ ìˆ˜íƒ‰ì„ ì´ê¸°ê¸° ìœ„í•´ ìê¸° ë‹­ì—ê²Œ ë¬´ì—‡ì„ ë¨¹ì´ëŠ”ê°€?", answers: ["ë³´ì•½", "ê³ ì¶”ì¥", "ê°ì"], correct: 1 },
                    { question: "'ë‚˜'ê°€ ì ìˆœë„¤ ë‹­ì„ ë•Œë ¤ì£½ì¸ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€?", answers: ["ìì‹ ì˜ ë‹­ì´ ê³„ì† ì ¸ì„œ í™”ê°€ ë‚˜ì„œ", "ì ìˆœì´ê°€ ì‹œì¼œì„œ", "ë‹­ì´ ë¶ˆìŒí•´ì„œ"], correct: 0 },
                    { question: "'ë‚˜'ì™€ ì ìˆœì´ì˜ ê°ˆë“±ì´ í•´ì†Œë˜ê³  í™”í•´í•˜ëŠ” ê³„ê¸°ê°€ ë˜ëŠ” ì†Œì¬ëŠ”?", answers: ["ê°ì", "ë‹­", "ë™ë°±ê½ƒ"], correct: 2 },
                    { question: "ì´ ì‘í’ˆì˜ ì›ƒìŒì„ ìœ ë°œí•˜ëŠ” ê°€ì¥ í° ìš”ì¸ì€?", answers: ["ì ìˆœì´ì˜ ì—‰ëš±í•œ í–‰ë™", "ì„œìˆ ì 'ë‚˜'ì˜ ì–´ìˆ˜ë£©í•¨", "ë‹­ë“¤ì˜ ìš°ìŠ¤ê½ìŠ¤ëŸ¬ìš´ ì‹¸ì›€"], correct: 1 },
                    { question: "ì´ ì‘í’ˆì˜ êµ¬ì„± ë°©ì‹ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?", answers: ["ì‹œê°„ ìˆœì„œì— ë”°ë¥¸ êµ¬ì„±", "ê³¼ê±°ì™€ í˜„ì¬ê°€ êµì°¨ë˜ëŠ” ì—­ìˆœí–‰ì  êµ¬ì„±", "ì—¬ëŸ¬ ì´ì•¼ê¸°ë¥¼ ë‚˜ì—´í•˜ëŠ” êµ¬ì„±"], correct: 1 },
                    { question: "'ëŠ ì§‘ì—” ì´ê±° ì—†ì§€?'ë¼ëŠ” ì ìˆœì´ì˜ ë§ì— ë‹´ê¸´ ì§„ì§œ ì˜ë„ëŠ”?", answers: ["ìë‘í•˜ë ¤ëŠ” ë§ˆìŒ", "ë¬´ì‹œí•˜ë ¤ëŠ” ë§ˆìŒ", "ê´€ì‹¬ì„ í‘œí˜„í•˜ëŠ” ë§ˆìŒ"], correct: 2 },
                    { question: "ì´ ì†Œì„¤ì—ì„œ 'ë™ë°±ê½ƒ'ì˜ ì—­í• ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?", answers: ["ê°ˆë“±ì„ ì‹¬í™”ì‹œí‚´", "í–¥í† ì , ë‚­ë§Œì  ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í•¨", "ì£¼ì¸ê³µì˜ ê°€ë‚œì„ ìƒì§•í•¨"], correct: 1 },
                    { question: "ì ìˆœì´ê°€ 'ë‚˜'ë¥¼ ëŒ€í•˜ëŠ” ë°©ì‹ì˜ íŠ¹ì§•ì€?", answers: ["ì§ì„¤ì ", "ë°˜ì–´ì ", "ìš°íšŒì "], correct: 1 },
                    { question: "'ë‚˜'ì™€ ì ìˆœì´ ì§‘ì•ˆì˜ ê´€ê³„ëŠ” ì–´ë– í•œê°€?", answers: ["ëŒ€ë“±í•œ ê´€ê³„", "ì›ìˆ˜ ê´€ê³„", "ì§€ì£¼-ì†Œì‘ì¸ ê´€ê³„"], correct: 2 },
                    { question: "ì ìˆœì´ê°€ 'ë‚˜'ì—ê²Œ 'ìš”ë‹´ë¶€í„° ë˜ ê·¸ë˜ ë´ë¼'ë¼ê³  ë§í•œ ì´ìœ ëŠ”?", answers: ["ì•ìœ¼ë¡œë„ ê³„ì† ê´´ë¡­íˆê² ë‹¤ëŠ” ê²½ê³ ", "ìì‹ ì˜ ë§ˆìŒì„ ë°›ì•„ë‹¬ë¼ëŠ” í‘œí˜„", "ë‹­ì„ ì£½ì¸ ê²ƒì— ëŒ€í•œ ìš©ì„œ"], correct: 1 },
                    { question: "ì´ ì‘í’ˆì€ ì–´ë–¤ ë¶„ìœ„ê¸°ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•˜ê³  ìˆëŠ”ê°€?", answers: ["ë¹„ê·¹ì , ì• ìƒì ", "í•´í•™ì , í–¥í† ì ", "êµí›ˆì , ë¹„íŒì "], correct: 1 },
                    { question: "ì‘í’ˆì˜ ë§ˆì§€ë§‰ì— 'ë‚˜'ì™€ ì ìˆœì´ê°€ ë™ë°±ê½ƒ ì†ì— íŒŒë¬»íˆëŠ” ì¥ë©´ì´ ì˜ë¯¸í•˜ëŠ” ë°”ëŠ”?", answers: ["ê°ˆë“±ì˜ ì ˆì •", "ìˆœìˆ˜í•œ ì‚¬ë‘ì˜ ì‹œì‘", "í˜„ì‹¤ë¡œë¶€í„°ì˜ ë„í”¼"], correct: 1 },
                    { question: "ì´ ì‘í’ˆì˜ ì œëª©ì¸ 'ë™ë°±ê½ƒ'ì€ ì‹¤ì œë¡œëŠ” ì–´ë–¤ ê½ƒì„ ê°€ë¦¬í‚¤ëŠ”ê°€?", answers: ["ìƒê°•ë‚˜ë¬´ê½ƒ", "ì§„ë‹¬ë˜ê½ƒ", "ì‚°ìˆ˜ìœ ê½ƒ"], correct: 0 }
                ],
                'ì½ê¸°ì˜ ìƒí™œí™”': quizzes['ì½ê¸°ì˜ ìƒí™œí™”'],
                'ë‹´í™”': quizzes['ë‹´í™”'],
                'ë¨¼ í›„ì¼': quizzes['ë¨¼ í›„ì¼'],
                'ì–‘ë°˜ì „': quizzes['ì–‘ë°˜ì „']
            };
            
            Object.keys(finalQuizzes).forEach(quizName => {
                const btn = document.createElement('button');
                btn.textContent = quizName;
                btn.className = "quiz-select-btn w-full bg-indigo-500 text-white font-bold py-3 px-2 rounded-lg text-sm md:text-base active:bg-indigo-700";
                btn.onclick = () => {
                    setupAudio();
                    playerName = elements.playerNameInput.value.trim();
                    if (!playerName) {
                        elements.playerNameInput.placeholder = "ì´ë¦„ì„ ê¼­ ì…ë ¥í•´ì£¼ì„¸ìš”!";
                        elements.playerNameInput.classList.add('border-red-500');
                        setTimeout(() => {
                            elements.playerNameInput.classList.remove('border-red-500');
                            elements.playerNameInput.placeholder = "ì´ë¦„";
                        }, 1500);
                        return;
                    }
                    currentQuizKey = quizName.replace(/[^a-zA-Z0-9ê°€-í£]/g, '');
                    currentQuizData = finalQuizzes[quizName];
                    initGame();
                };
                elements.quizOptions.appendChild(btn);
            });
        };

        const resetToSelection = () => {
            elements.startTitle.textContent = "í•´ì†”ì¤‘&ë¼ë¼ì¤‘ êµ­ì–´ ê¸°ë§ëŒ€ë¹„ í€´ì¦ˆ";
            elements.startDesc.textContent = "í”Œë ˆì´í•  ì‘í’ˆì„ ì„ íƒí•˜ì„¸ìš”!";
            elements.restartContainer.classList.add('hidden');
            elements.leaderboard.classList.add('hidden');
            elements.nameInputContainer.classList.remove('hidden');
            elements.quizSelectionContainer.classList.remove('hidden');
        };
        
        populateQuizOptions();

        document.addEventListener('keydown', (e) => {
            if (elements.startScreen.classList.contains('hidden')) {
                if (e.key === 'ArrowLeft') moveCar('left');
                else if (e.key === 'ArrowRight') moveCar('right');
                else if (e.key === 'ArrowUp' || e.key === ' ') { e.preventDefault(); checkAnswerNow(); }
            }
        });

        elements.moveLeftBtn.addEventListener('click', () => moveCar('left'));
        elements.moveRightBtn.addEventListener('click', () => moveCar('right'));
        elements.moveForwardBtn.addEventListener('click', checkAnswerNow);
        elements.restartButton.addEventListener('click', resetToSelection);
        window.addEventListener('resize', () => { if (isGameActive) updateCarPosition(); });
    </script>
</body>
</html>
